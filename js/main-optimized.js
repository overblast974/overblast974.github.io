// JavaScript Optimisé - Version compressée pour performance
(function(){function initPreloader(){const e=document.getElementById("preloader");e&&window.addEventListener("load",function(){e.style.display="none";const o=document.querySelector(".hero-content");o&&document.querySelectorAll(".hero-content > *").forEach((e,o)=>{setTimeout(()=>{e.classList.add("in-view")},100*o)})})}function initMobileMenu(){const e=document.getElementById("navToggle"),o=document.getElementById("navMenu");e&&o&&(e.addEventListener("click",function(){this.classList.toggle("active"),o.classList.toggle("active"),o.classList.contains("active")&&document.querySelectorAll(".nav-link").forEach((e,o)=>{e.style.animationDelay=`${.1+.1*o}s`,e.classList.add("animated")})}),document.querySelectorAll(".nav-link").forEach(t=>{t.addEventListener("click",function(){e.classList.remove("active"),o.classList.remove("active")})}),document.addEventListener("click",function(t){o.classList.contains("active")&&!o.contains(t.target)&&!e.contains(t.target)&&(e.classList.remove("active"),o.classList.remove("active"))}))}function initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const o=this.getAttribute("href");if("#"===o)return;const t=document.querySelector(o);if(t){const e=window.pageYOffset,o=t.getBoundingClientRect().top+window.pageYOffset,n=o-e,i=1e3;let c=null;!function e(o){c||(c=o);const r=o-c,a=Math.min(r/i,1),l=a<.5?4*a*a*a:1-Math.pow(-2*a+2,3)/2;window.scrollTo(0,e+n*l),r<i&&window.requestAnimationFrame(e)}(0)}})})}function initScrollAnimations(){const e=document.querySelectorAll(".fade-in, .slide-in-left, .slide-in-right, .zoom-in, .services, .testimonials, .stagger-children, .contact, .contact-info, .contact-form");e.length&&(e.forEach(e=>{e.classList.add("in-view"),e.classList.contains("stagger-children")&&e.querySelectorAll(".stagger-item").forEach((e,o)=>{setTimeout(()=>{e.classList.add("in-view")},100*o)}),(e.classList.contains("contact-info")||e.classList.contains("contact-form"))&&(e.style.opacity="1",e.style.transform="translateX(0)")}),new IntersectionObserver((e,o)=>{e.forEach(e=>{if(e.isIntersecting){e.target.classList.add("in-view");const t=e.target.querySelector(".contact-info"),n=e.target.querySelector(".contact-form");t&&(t.style.opacity="1",t.style.transform="translateX(0)"),n&&(n.style.opacity="1",n.style.transform="translateX(0)"),o.unobserve(e.target),e.target.classList.contains("stagger-children")&&e.target.querySelectorAll(".stagger-item").forEach((e,o)=>{setTimeout(()=>{e.classList.add("in-view")},100*o)})}})},{threshold:.15,rootMargin:"0px 0px -100px 0px"}).observe)(e.forEach(e=>{observer.observe(e)}))}function initHeroEffects(){const e=document.querySelector(".hero"),o=document.querySelector(".hero-image"),t=document.querySelector(".hero-content");e&&o&&t&&window.addEventListener("scroll",function(){const e=window.pageYOffset;if(e<window.innerHeight){const o=1-e/(window.innerHeight*.7);t.style.opacity=o}})}function initServiceCards(){document.querySelectorAll(".fade-in, .slide-in-left, .slide-in-right").forEach(e=>{e.style.opacity="1",e.style.transform="translateY(0) translateX(0)"})}function initBackToTop(){const e=document.getElementById("backToTop");e&&(window.addEventListener("scroll",function(){window.pageYOffset>600?e.classList.add("visible"):e.classList.remove("visible")}),e.addEventListener("click",function(o){o.preventDefault(),this.classList.add("rotating");const t=()=>{const o=window.pageYOffset;o>0?(window.scrollTo(0,o-Math.max(20,o/10)),window.requestAnimationFrame(t)):e.classList.remove("rotating")};window.requestAnimationFrame(t)}))}function initFaqAccordion(){document.querySelectorAll(".faq-item").forEach(e=>{const o=e.querySelector(".faq-question");o&&o.addEventListener("click",()=>{document.querySelectorAll(".faq-item").forEach(o=>{o!==e&&o.classList.contains("active")&&o.classList.remove("active")}),e.classList.toggle("active")})})}function initCoursesSlider(){const e=document.querySelectorAll(".course-slide"),o=document.querySelectorAll(".slide-dot");let t=0,n;function i(t){e.forEach(e=>{e.classList.remove("active"),e.style.opacity="0",e.style.visibility="hidden"}),o.forEach(e=>{e.classList.remove("active")}),e[t]&&(e[t].classList.add("active"),e[t].style.opacity="1",e[t].style.visibility="visible"),o[t]&&o[t].classList.add("active")}function c(){let o=t+1;o>=e.length&&(o=0),i(o),t=o}function r(){n=setInterval(c,7e3)}e.length>0&&(i(0),r(),o.forEach((e,o)=>{e.addEventListener("click",function(){clearInterval(n),i(o),t=o,r()})}))}document.addEventListener("DOMContentLoaded",function(){initPreloader(),initMobileMenu(),initSmoothScroll(),initScrollAnimations(),initHeroEffects(),initServiceCards(),initBackToTop(),initFaqAccordion(),initCoursesSlider()})})();